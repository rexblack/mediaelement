/*
* Media Element
* HTML5 <video> and <audio> shim and player
* http://mediaelementjs.com/
*
* Creates a JavaScript object that mimics HTML5 media object
* for browsers that don't understand HTML5 or can't play the provided codec
* Can also play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
*
* Copyright 2010, John Dyer
* Dual licensed under the MIT or GPL Version 2 licenses.
*
*/
var mejs=mejs||{};mejs.version="2.0.0";mejs.meIndex=0;mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","audio/flv","audio/mp3","audio/m4a"]}]};mejs.Utility={encodeUrl:function(a){return a.replace(/\?/gi,"%3F").replace(/=/gi,"%3D").replace(/&/gi,"%26")},escapeHTML:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(a){var b=document.createElement("div");b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>';return b.firstChild.href},getScriptPath:function(b){var f=0,e,g="",d="",c,a=document.getElementsByTagName("script");for(;f<a.length;f++){c=a[f].src;for(e=0;e<b.length;e++){d=b[e];if(c.indexOf(d)>-1){g=c.substring(0,c.indexOf(d));break}}if(g!==""){break}}return g},secondsToTimeCode:function(b){b=Math.round(b);var a=Math.floor(b/60);a=(a>=10)?a:"0"+a;b=Math.floor(b%60);b=(b>=10)?b:"0"+b;return a+":"+b}};mejs.PluginDetector={hasPluginVersion:function(c,a){var b=this.plugins[c];a[1]=a[1]||0;a[2]=a[2]||0;return(b[0]>a[0]||(b[0]==a[0]&&b[1]>a[1])||(b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]))?true:false},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(d,c,e,a,b){this.plugins[d]=this.detectPlugin(c,e,a,b)},detectPlugin:function(h,b,c,l){var j=[0,0,0],k,f,a;if(typeof(this.nav.plugins)!="undefined"&&typeof this.nav.plugins[h]=="object"){k=this.nav.plugins[h].description;if(k&&!(typeof this.nav.mimeTypes!="undefined"&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){j=k.replace(h,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");for(f=0;f<j.length;f++){j[f]=parseInt(j[f],10)}}}else{if(typeof(window.ActiveXObject)!="undefined"){try{a=new ActiveXObject(c);if(a){j=l(a)}}catch(g){}}}return j}};mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(b){var a=[],c=b.GetVariable("$version");if(c){c=c.split(" ")[1].split(",");a=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]}return a});mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(b){var a=[0,0,0,0],c=function(f,d,e,g){while(f.isVersionSupported(d[0]+"."+d[1]+"."+d[2]+"."+d[3])){d[e]+=g}d[e]-=g};c(b,a,0,1);c(b,a,1,1);c(b,a,2,10000);c(b,a,2,1000);c(b,a,2,100);c(b,a,2,10);c(b,a,2,1);c(b,a,3,1);return a});if(mejs.PluginDetector.ua.match(/Android 2\.[12]/)!==null){HTMLMediaElement.canPlayType=function(a){return(a.match(/video\/(mp4|m4v)/gi)!==null)?"probably":""}}mejs.MediaFeatures={init:function(){var e=mejs.PluginDetector.nav,c=mejs.PluginDetector.ua,b,a,d=["source","track","audio","video"];this.isiPad=(c.match(/iPad/i)!==null);this.isiPhone=(c.match(/iPhone/i)!==null);this.isAndroid=(c.match(/Android/i)!==null);this.isIE=(e.appName.indexOf("Microsoft")!=-1);this.isChrome=(c.match(/Chrome/gi)!==null);for(b=0;b<d.length;b++){a=document.createElement(d[b])}this.hasNativeFullScreen=(typeof a.webkitEnterFullScreen!=="undefined");if(this.isChrome){this.hasNativeFullScreen=false}}};mejs.MediaFeatures.init();mejs.HtmlMediaElement={pluginType:"native",setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},setSrc:function(a){if(typeof a=="string"){this.src=a}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.src=c.src}}}},setVideoSize:function(b,a){this.width=b;this.height=a}};mejs.PluginMediaElement=function(a,b){this.id=a;this.pluginType=b;this.events={}};mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,muted:false,volume:1,currentTime:0,play:function(){if(this.pluginApi!=null){this.pluginApi.playMedia();this.paused=false}},load:function(){if(this.pluginApi!=null){this.pluginApi.loadMedia();this.paused=false}},pause:function(){if(this.pluginApi!=null){this.pluginApi.pauseMedia();this.paused=true}},canPlayType:function(e){var d,c,a,b=mejs.plugins[this.pluginType];for(d=0;d<b.length;d++){a=b[d];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,a.version)){for(c=0;c<a.types.length;c++){if(e==a.types[c]){return true}}}}return false},setSrc:function(a){if(typeof a=="string"){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a))}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src))}}}},setCurrentTime:function(a){if(this.pluginApi!=null){this.pluginApi.setCurrentTime(a);this.currentTime=a}},setVolume:function(a){if(this.pluginApi!=null){this.pluginApi.setVolume(a);this.volume=a}},setMuted:function(a){if(this.pluginApi!=null){this.pluginApi.setMuted(a);this.muted=a}},setVideoSize:function(b,a){if(this.pluginElement.style){this.pluginElement.style.width=b+"px";this.pluginElement.style.height=a+"px"}if(this.pluginApi!=null){this.pluginApi.setVideoSize(b,a)}},setFullscreen:function(a){if(this.pluginApi!=null){this.pluginApi.setFullscreen(a)}},addEventListener:function(b,c,a){this.events[b]=this.events[b]||[];this.events[b].push(c)},dispatchEvent:function(a){var c,b,d=this.events[a];if(d){b=Array.prototype.slice.call(arguments,1);for(c=0;c<d.length;c++){d[c].apply(null,b)}}}};mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(c,a,b){this.pluginMediaElements[c]=a;this.htmlMediaElements[c]=b},initPlugin:function(c){var a=this.pluginMediaElements[c],b=this.htmlMediaElements[c];switch(a.pluginType){case"flash":a.pluginElement=a.pluginApi=document.getElementById(c);break;case"silverlight":a.pluginElement=document.getElementById(a.id);a.pluginApi=a.pluginElement.Content.SilverlightApp;break}if(a.success){a.success(a,b)}},fireEvent:function(h,c,b){var g,f,a,d=this.pluginMediaElements[h];d.ended=false;d.paused=true;g={type:c,target:d};for(f in b){d[f]=b[f];g[f]=b[f]}a=b.bufferedTime||0;g.target.buffered=g.buffered={start:function(e){return 0},end:function(e){return a},length:1};d.dispatchEvent(g.type,g)}};mejs.MediaElementDefaults={enablePluginDebug:false,plugins:["flash","silverlight"],type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,timerRate:250,success:function(){},error:function(){}};mejs.MediaElement=function(a,b){mejs.HtmlMediaElementShim.create(a,b)};mejs.HtmlMediaElementShim={create:function(f,e){var k=mejs.MediaElementDefaults,i=(typeof(f)=="string")?document.getElementById(f):f,a=(i.tagName.toLowerCase()=="video"),b=(typeof(i.canPlayType)!="undefined"),c={method:"",url:""},j=i.getAttribute("poster"),g=i.getAttribute("autoplay"),h=i.getAttribute("preload"),d;for(d in e){k[d]=e[d]}j=(typeof j=="undefined"||j===null)?"":j;h=(typeof h=="undefined"||h===null||h==="false")?"none":h;g=(typeof g=="undefined"||g===null||g==="false")?"":g;c=this.determinePlayback(i,k,a,b);if(c.method=="native"){this.updateNative(i,k,g,h,c)}else{if(c.method!==""){this.createPlugin(i,k,a,c.method,(c.url!==null)?mejs.Utility.absolutizeUrl(c.url).replace("&","%26"):"",j,g,h)}else{this.createErrorMessage(i,k,(c.url!==null)?mejs.Utility.absolutizeUrl(c.url):"",j)}}},determinePlayback:function(s,v,b,c){var u=[],m,h,g,f,e,d,q,t={method:"",url:""},a=s.getAttribute("src"),o,p,r;if(typeof(v.type)!="undefined"&&v.type!==""){u.push({type:v.type,url:null})}else{if(a!="undefined"&&a!==null){d=s.getAttribute("src");q=this.checkType(d,s.getAttribute("type"),b);u.push({type:q,url:d})}else{for(m=0;m<s.childNodes.length;m++){e=s.childNodes[m];if(e.nodeType==1&&e.tagName.toLowerCase()=="source"){d=e.getAttribute("src");q=this.checkType(d,e.getAttribute("type"),b);u.push({type:q,url:d})}}}}if(c){for(m=0;m<u.length;m++){if(s.canPlayType(u[m].type).replace(/no/,"")!==""){t.method="native";t.url=u[m].url;return t}}}for(m=0;m<u.length;m++){q=u[m].type;for(h=0;h<v.plugins.length;h++){o=v.plugins[h];p=mejs.plugins[o];for(g=0;g<p.length;g++){r=p[g];if(mejs.PluginDetector.hasPluginVersion(o,r.version)){for(f=0;f<r.types.length;f++){if(q==r.types[f]){t.method=o;t.url=u[m].url;return t}}}}}}if(t.method===""){t.url=u[0].url}return t},checkType:function(a,c,d){var b;if(a&&!c){b=a.substring(a.lastIndexOf(".")+1);return((d)?"video":"audio")+"/"+b}else{return c}},createErrorMessage:function(c,b,f,g){var a=document.createElement("div");a.className="me-cannotplay";try{a.style.width=c.width+"px";a.style.height=c.height+"px"}catch(d){}a.innerHTML=(g!=="")?'<a href="'+f+'"><img src="'+g+'" /></a>':'<a href="'+f+'"><span>Download File</span></a>';c.parentNode.insertBefore(a,c);c.style.display="none";b.error(c)},createPlugin:function(j,o,b,f,i,l,g,k){var d=1,m=1,e="me_"+f+"_"+(mejs.meIndex++),n=new mejs.PluginMediaElement(e,f),c=document.createElement("div"),h,a;h=j.parentNode;while(h!==null&&h.tagName.toLowerCase()!="body"){if(h.parentNode.tagName.toLowerCase()=="p"){h.parentNode.parentNode.insertBefore(h,h.parentNode);break}h=h.parentNode}if(b){d=(o.videoWidth>0)?o.videoWidth:(j.getAttribute("width")!==null)?j.getAttribute("width"):o.defaultVideoWidth;m=(o.videoHeight>0)?o.videoHeight:(j.getAttribute("height")!==null)?j.getAttribute("height"):o.defaultVideoHeight}else{if(o.enablePluginDebug){d=320;m=240}}n.success=o.success;mejs.MediaPluginBridge.registerPluginElement(e,n,j);c.className="me-plugin";j.parentNode.insertBefore(c,j);a=["id="+e,"poster="+l,"isvideo="+b.toString(),"autoplay="+g,"preload="+k,"width="+d,"timerrate="+o.timerRate,"height="+m];if(i!==null){a.push("file="+mejs.Utility.encodeUrl(i))}if(o.enablePluginDebug){a.push("debug=true")}switch(f){case"silverlight":c.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+e+'" name="'+e+'" width="'+d+'" height="'+m+'"><param name="initParams" value="'+a.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+o.pluginPath+o.silverlightName+'" /></object>';break;case"flash":if(mejs.MediaFeatures.isIE){c.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e+'" width="'+d+'" height="'+m+'"><param name="movie" value="'+o.pluginPath+o.flashName+"?x="+(new Date())+'" /><param name="flashvars" value="'+a.join("&")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="sameDomain" /><param name="allowFullScreen" value="true" /></object>'}else{c.innerHTML='<embed id="'+e+'" name="'+e+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="sameDomain" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+o.pluginPath+o.flashName+"?"+a.join("&")+'" width="'+d+'" height="'+m+'"></embed>'}break}j.style.display="none"},updateNative:function(e,c,f,b,d){for(var a in mejs.HtmlMediaElement){e[a]=mejs.HtmlMediaElement[a]}if(mejs.MediaFeatures.isChrome&&b=="none"&&f!==""){e.src="";e.load();e.canceledPreload=true;e.addEventListener("play",function(){if(e.canceledPreload){e.src=d.url;e.load();e.play();e.canceledPreload=false}},false)}c.success(e,e)}};window.mejs=mejs;window.MediaElement=mejs.MediaElement;
/*
 * Media Element jQuery plugin
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js
 *
 * Copyright 2010, John Dyer
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function(a){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,audioWidth:400,audioHeight:30,startVolume:0.8,loop:false,enableAutosize:true,features:["playpause","progress","current","duration","tracks","volume","fullscreen","backlight"]};mejs.mepIndex=0;mejs.MediaElementPlayer=function(d,e){var b=this,c=mejs.MediaFeatures;b.$media=a(d);b.options=a.extend(true,{},mejs.MepDefaults,e);b.isVideo=(b.$media[0].tagName.toLowerCase()=="video");if(c.isiPad||c.isiPhone){b.$media.attr("controls","controls");b.$media.removeAttr("poster");if(c.isiPad&&b.$media[0].getAttribute("autoplay")!==null){b.$media[0].load();b.$media[0].play()}return}else{if(c.isAndroid&&b.isVideo){if(b.$media.find("source").length>0){b.$media[0].src=b.$media.find('source[src$="mp4"]').attr("src")}b.$media.click(function(){b.$media[0].play()});return}else{b.$media.removeAttr("controls")}}b.init();return b};mejs.MediaElementPlayer.prototype={init:function(){var b=this,c=a.extend(true,{},b.options,{success:function(e,d){b.meReady(e,d)},error:function(d){b.handleError(d)}});b.id="mep_"+mejs.mepIndex++;b.container=a('<div id="'+b.id+'" class="mejs-container"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(b.$media[0].className).insertBefore(b.$media);b.container.find(".mejs-mediaelement").append(b.$media);b.controls=b.container.find(".mejs-controls");b.layers=b.container.find(".mejs-layers");if(b.isVideo){b.width=(b.options.videoWidth>0)?b.options.videoWidth:(b.$media[0].getAttribute("width")!==null)?b.$media.attr("width"):b.options.defaultVideoWidth;b.height=(b.options.videoHeight>0)?b.options.videoHeight:(b.$media[0].getAttribute("height")!==null)?b.$media.attr("height"):b.options.defaultVideoHeight}else{b.width=b.options.audioWidth;b.height=b.options.audioHeight}b.setPlayerSize(b.width,b.height);c.pluginWidth=b.height;c.pluginHeight=b.width;mejs.MediaElement(b.$media[0],c)},meReady:function(i,d){var c=this,g,b;c.media=i;c.domNode=d;c.buildposter(c,c.controls,c.layers,c.media);c.buildoverlay(c,c.controls,c.layers,c.media);c.findTracks();for(g in c.options.features){b=c.options.features[g];if(c["build"+b]){try{c["build"+b](c,c.controls,c.layers,c.media)}catch(h){}}}c.setPlayerSize(c.width,c.height);c.setControlsSize();if(c.isVideo){c.container.bind("mouseenter",function(){c.controls.css("visibility","visible");c.controls.stop(true,true).fadeIn(200)}).bind("mouseleave",function(){if(!c.media.paused){c.controls.stop(true,true).fadeOut(200,function(){a(this).css("visibility","hidden");a(this).css("display","block")})}});if(c.options.enableAutosize){c.media.addEventListener("loadedmetadata",function(f){if(c.options.videoHeight<=0&&c.$media[0].getAttribute("height")===null&&!isNaN(f.target.videoHeight)){c.setPlayerSize(f.target.videoWidth,f.target.videoHeight);c.setControlsSize();c.media.setVideoSize(f.target.videoWidth,f.target.videoHeight)}},false)}}c.media.addEventListener("ended",function(f){c.media.setCurrentTime(0);c.media.pause();if(c.options.loop){c.media.play()}else{c.controls.css("visibility","visible")}},true);setTimeout(function(){c.setControlsSize();c.setPlayerSize(c.width,c.height)},50);if(c.options.success){c.options.success(c.media,c.domNode)}},setPlayerSize:function(d,b){var c=this;c.width=parseInt(d,10);c.height=parseInt(b,10);c.container.width(c.width).height(c.height);c.layers.children("div.mejs-layer").width(c.width).height(c.height)},setControlsSize:function(){var b=this,e=0,g=0,f=b.controls.find(".mejs-time-rail"),d=b.controls.find(".mejs-time-total"),c=f.siblings();c.each(function(){if(a(this).css("position")!="absolute"){e+=a(this).outerWidth(true)}});g=b.controls.width()-e-(f.outerWidth(true)-f.outerWidth(false));f.width(g);d.width(g-(d.outerWidth(true)-d.width()))},buildposter:function(d,b,f,e){var g=a('<div class="mejs-poster mejs-layer"><img /></div>').appendTo(f),c=d.$media.attr("poster");if(d.options.poster!=""){g.find("img").attr("src",d.options.poster)}else{if(c!==""&&c!=null){g.find("img").attr("src",c)}else{g.hide()}}e.addEventListener("play",function(){g.hide()},false)},buildoverlay:function(d,b,f,e){if(!d.isVideo){return}var c=a('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-button"></div></div>').appendTo(f).click(function(){if(e.paused){e.play()}else{e.pause()}});e.addEventListener("play",function(){c.hide()},false);e.addEventListener("pause",function(){c.show()},false)},findTracks:function(){var b=this,c=b.$media.find("track");b.tracks=[];c.each(function(){b.tracks.push({srclang:a(this).attr("srclang").toLowerCase(),src:a(this).attr("src"),kind:a(this).attr("kind"),entries:[],isLoaded:false})})},changeSkin:function(b){this.container[0].className="mejs-container "+b;this.setPlayerSize();this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(b){this.media.setMuted(b)},setCurrentTime:function(b){this.media.setCurrentTime(b)},getCurrentTime:function(){this.media.currentTime},setVolume:function(b){this.media.setVolume(b)},getVolume:function(){this.media.volume},setSrc:function(b){this.media.setSrc(b)}};jQuery.fn.mediaelementplayer=function(b){return this.each(function(){return new mejs.MediaElementPlayer(a(this),b)})};window.MediaElementPlayer=mejs.MediaElementPlayer})(jQuery);(function(a){MediaElementPlayer.prototype.buildplaypause=function(c,b,f,e){var d=a('<div class="mejs-button mejs-playpause-button mejs-play"><span></span></div>').appendTo(b).click(function(){if(e.paused){e.play()}else{e.pause()}});e.addEventListener("play",function(){d.removeClass("mejs-play").addClass("mejs-pause")},false);e.addEventListener("playing",function(){d.removeClass("mejs-play").addClass("mejs-pause")},false);e.addEventListener("pause",function(){d.removeClass("mejs-pause").addClass("mejs-play")},false);e.addEventListener("paused",function(){d.removeClass("mejs-pause").addClass("mejs-play")},false)}})(jQuery);(function(a){MediaElementPlayer.prototype.buildprogress=function(n,o,f,c){a('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(o);var k=o.find(".mejs-time-total"),g=o.find(".mejs-time-loaded"),j=o.find(".mejs-time-current"),i=o.find(".mejs-time-handle"),m=o.find(".mejs-time-float"),b=o.find(".mejs-time-float-current"),d=function(r){var q=r.target,p=null;if(q&&q.bytesTotal!=undefined&&q.bytesTotal>0&&q.bufferedBytes!=undefined){p=q.bufferedBytes/q.bytesTotal}else{if(q&&q.buffered&&q.buffered.length>0&&q.buffered.end&&q.duration){p=q.buffered.end(0)/q.duration}}if(p!==null){g.width(k.width()*p)}},l=function(r){if(c.currentTime&&c.duration){var q=k.width()*c.currentTime/c.duration,p=q-(i.outerWidth(true)/2);j.width(q);i.css("left",p);m.css("left",p);b.html(mejs.Utility.secondsToTimeCode(c.currentTime))}},e=function(t){var p=t.pageX,u=k.offset(),r=k.outerWidth(),q=((p-u.left)/r),s=q*c.duration;c.setCurrentTime(s)},h=false;k.bind("mousedown",function(p){e(p);h=true;return false});a(document).bind("mouseup",function(p){h=false}).bind("mousemove",function(p){if(h){e(p)}});c.addEventListener("progress",function(p){d(p)},false);c.addEventListener("timeupdate",function(p){d(p);l(p)},false)}})(jQuery);(function(a){MediaElementPlayer.prototype.buildcurrent=function(c,b,e,d){a('<div class="mejs-time"><span class="mejs-currenttime">00:00</span></div>').appendTo(b);d.addEventListener("timeupdate",function(){if(d.currentTime){b.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(d.currentTime))}},false)};MediaElementPlayer.prototype.buildduration=function(c,b,e,d){if(b.children().last().find(".mejs-currenttime").length>0){a(' <span> | </span> <span class="mejs-duration">00:00</span>').appendTo(b.find(".mejs-time"))}else{a('<div class="mejs-time"><span class="mejs-duration">00:00</span></div>').appendTo(b)}d.addEventListener("timeupdate",function(){if(d.duration){b.find(".mejs-duration").html(mejs.Utility.secondsToTimeCode(d.duration))}},false)}})(jQuery);(function(a){MediaElementPlayer.prototype.buildvolume=function(k,l,g,d){var e=a('<div class="mejs-button mejs-volume-button mejs-mute"><span></span><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(l),m=e.find(".mejs-volume-slider"),b=e.find(".mejs-volume-total"),h=e.find(".mejs-volume-current"),f=e.find(".mejs-volume-handle"),j=function(n){var o=b.height()-(b.height()*n);f.css("top",o-(f.height()/2));h.height(b.height()-o+parseInt(b.css("top").replace(/px/,""),10));h.css("top",o)},c=function(s){var p=b.height(),o=b.offset(),n=parseInt(b.css("top").replace(/px/,""),10),r=s.pageY-o.top,q=(p-r)/p;if(r<0){r=0}else{if(r>p){r=p}}f.css("top",r-(f.height()/2)+n);h.height(p-r);h.css("top",r+n);if(q==0){d.setMuted(true);e.removeClass("mejs-mute").addClass("mejs-unmute")}else{d.setMuted(false);e.removeClass("mejs-unmute").addClass("mejs-mute")}q=Math.max(0,q);q=Math.min(q,1);d.setVolume(q)},i=false;m.bind("mousedown",function(n){c(n);i=true;return false});a(document).bind("mouseup",function(n){i=false}).bind("mousemove",function(n){if(i){c(n)}});e.find("span").click(function(){if(d.muted){d.setMuted(false);e.removeClass("mejs-unmute").addClass("mejs-mute");j(1)}else{d.setMuted(true);e.removeClass("mejs-mute").addClass("mejs-unmute");j(0)}});d.addEventListener("volumechange",function(n){if(!i){j(n.target.volume)}},true);d.setVolume(k.options.startVolume)}})(jQuery);(function(a){MediaElementPlayer.prototype.buildfullscreen=function(j,k,f,d){if(!j.isVideo){return}var h=false,g=0,c=0,b=j.container,e=a('<div class="mejs-button mejs-fullscreen-button"><span></span></div>').appendTo(k).click(function(){i(!h)}),i=function(l){switch(d.pluginType){case"flash":case"silverlight":d.setFullscreen(l);break;case"native":if(mejs.MediaFeatures.hasNativeFullScreen){if(l){d.webkitEnterFullScreen()}else{d.webkitExitFullScreen()}}else{if(l){g=j.$media.height();c=j.$media.width();b.addClass("mejs-container-fullscreen").width("100%").height("100%").css("z-index",1000);j.$media.width("100%").height("100%");f.children("div").width("100%").height("100%");e.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen");j.setControlsSize()}else{b.removeClass("mejs-container-fullscreen").width(c).height(g).css("z-index",1);j.$media.width(c).height(g);f.children("div").width(c).height(g);e.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen");j.setControlsSize()}}}h=l};a(document).bind("keydown",function(l){if(h&&l.keyCode==27){i(false)}})}})(jQuery);(function(a){a.extend(mejs.MepDefaults,{startLanguage:"",translations:[],translationSelector:false,googleApiKey:""});a.extend(MediaElementPlayer.prototype,{buildtracks:function(e,b,g,f){if(!e.isVideo){return}if(e.tracks.length==0){return}var d,c="";e.chapters=a('<div class="mejs-chapters mejs-layer"></div>').prependTo(g).hide();e.captions=a('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(g).hide();e.captionsText=e.captions.find(".mejs-captions-text");e.captionsButton=a('<div class="mejs-button mejs-captions-button"><span></span><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+e.id+'_captions" id="'+e.id+'_captions_none" value="none" checked="checked" /><label for="'+e.id+'_captions_none">None</label></li></ul></div></div>').appendTo(b).delegate("input[type=radio]","click",function(){lang=this.value;if(lang=="none"){e.selectedTrack=null}else{for(d=0;d<e.tracks.length;d++){if(e.tracks[d].srclang==lang){e.selectedTrack=e.tracks[d];e.captions.attr("lang",e.selectedTrack.srclang);e.displayCaptions();break}}}});e.container.bind("mouseenter",function(){var h=e.container.find(".mejs-captions-position");h.css("bottom",(parseInt(h.css("bottom").replace(/px/,""),10)+e.controls.height())+"px")}).bind("mouseleave",function(){if(!f.paused){e.container.find(".mejs-captions-position").css("bottom","")}});e.trackToLoad=-1;e.selectedTrack=null;e.isLoadingTrack=false;if(e.tracks.length>0&&e.options.translations.length>0){for(d=0;d<e.options.translations.length;d++){e.tracks.push({srclang:e.options.translations[d].toLowerCase(),src:null,kind:"subtitles",entries:[],isLoaded:false,isTranslation:true})}}for(d=0;d<e.tracks.length;d++){if(e.tracks[d].kind=="subtitles"){e.addTrackButton(e.tracks[d].srclang,e.tracks[d].isTranslation)}}e.loadNextTrack();f.addEventListener("timeupdate",function(h){e.displayCaptions()},false);f.addEventListener("loadedmetadata",function(h){e.displayChapters()},false);e.container.hover(function(){e.chapters.css("visibility","visible");e.chapters.fadeIn(200)},function(){if(!f.paused){e.chapters.fadeOut(200,function(){a(this).css("visibility","hidden");a(this).css("display","block")})}});if(e.options.translationSelector){for(d in mejs.language.codes){c+='<option value="'+d+'">'+mejs.language.codes[d]+"</option>"}e.container.find(".mejs-captions-selector ul").before(a('<select class="mejs-captions-translations"><option value="">--Add Translation--</option>'+c+"</select>"));e.container.find(".mejs-captions-translations").change(function(){var h=a(this);lang=h.val();if(lang!=""){e.tracks.push({srclang:lang,src:null,entries:[],isLoaded:false,isTranslation:true});if(!e.isLoadingTrack){e.trackToLoad--;e.addTrackButton(lang,true);e.options.startLanguage=lang;e.loadNextTrack()}}})}},loadNextTrack:function(){var b=this;b.trackToLoad++;if(b.trackToLoad<b.tracks.length){b.isLoadingTrack=true;b.loadTrack(b.trackToLoad)}else{b.isLoadingTrack=false}},loadTrack:function(c){var d=this,b=d.tracks[c],e=function(){b.isLoaded=true;d.enableTrackButton(b.srclang);d.loadNextTrack()};if(b.isTranslation){mejs.SrtParser.translateSrt(d.tracks[0].entries,d.tracks[0].srclang,b.srclang,d.options.googleApiKey,function(f){b.entries=f;e()})}else{a.ajax({url:b.src,success:function(f){b.entries=mejs.SrtParser.parse(f);e();if(b.kind=="chapters"&&d.media.duration>0){d.drawChapters(b)}},error:function(){d.loadNextTrack()}})}},enableTrackButton:function(c){var b=this;b.captionsButton.find("input[value="+c+"]").attr("disabled","").siblings("label").html(mejs.language.codes[c]||c);if(b.options.startLanguage==c){a("#"+b.id+"_captions_"+c).click()}b.adjustLanguageBox()},addTrackButton:function(e,d){var c=this,b=mejs.language.codes[e]||e;c.captionsButton.find("ul").append(a('<li><input type="radio" name="'+c.id+'_captions" id="'+c.id+"_captions_"+e+'" value="'+e+'" disabled="disabled" /><label for="'+c.id+"_captions_"+e+'">'+b+((d)?" (translating)":" (loading)")+"</label></li>"));c.adjustLanguageBox();c.container.find(".mejs-captions-translations option[value="+e+"]").remove()},adjustLanguageBox:function(){var b=this;b.captionsButton.find(".mejs-captions-selector").height(b.captionsButton.find(".mejs-captions-selector ul").outerHeight(true)+b.captionsButton.find(".mejs-captions-translations").outerHeight(true))},displayCaptions:function(){if(typeof this.tracks=="undefined"){return}var d=this,c,b=d.selectedTrack;if(b!=null&&b.isLoaded){for(c=0;c<b.entries.times.length;c++){if(d.media.currentTime>=b.entries.times[c].start&&d.media.currentTime<=b.entries.times[c].stop){d.captionsText.html(b.entries.text[c]);d.captions.show();return}}d.captions.hide()}else{d.captions.hide()}},displayChapters:function(){var c=this,b;for(b=0;b<c.tracks.length;b++){if(c.tracks[b].kind=="chapters"&&c.tracks[b].isLoaded){c.drawChapters(c.tracks[b]);break}}},drawChapters:function(f){var c=this,b,d,e=0,g=0;c.chapters.empty();for(b=0;b<f.entries.times.length;b++){d=f.entries.times[b].stop-f.entries.times[b].start;e=Math.floor(d/c.media.duration*100);if(e+g>100||b==f.entries.times.length-1&&e+g<100){e=100-g}c.chapters.append(a('<div class="mejs-chapter" rel="'+f.entries.times[b].start+'" style="left: '+g.toString()+"%;width: "+e.toString()+'%;"><div class="mejs-chapter-block'+((b==f.entries.times.length-1)?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+f.entries.text[b]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(f.entries.times[b].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(f.entries.times[b].stop)+"</span></div></div>"));g+=e}c.chapters.find("div.mejs-chapter").click(function(){c.media.setCurrentTime(parseFloat(a(this).attr("rel")));if(c.media.paused){c.media.play()}});c.chapters.show()}});mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}};mejs.SrtParser={pattern_identifier:/^[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{3})?)(.*)$/,timecodeToSeconds:function(b){var c=b.split(":");return c[0]*60*60+c[1]*60+parseFloat(c[2].replace(",","."))},split2:function(c,b){return c.split(b)},parse:function(e){var f=0,d=this.split2(e,/\r?\n/),c={text:[],times:[]},b,g;for(;f<d.length;f++){if(this.pattern_identifier.exec(d[f])){f++;b=this.pattern_timecode.exec(d[f]);if(b&&f<d.length){f++;g=d[f];f++;while(d[f]!==""&&f<d.length){g=g+"\n"+d[f];f++}c.text.push(g);c.times.push({start:this.timecodeToSeconds(b[1]),stop:this.timecodeToSeconds(b[3]),settings:b[5]})}}}return c},translateSrt:function(d,j,f,g,h){var b={text:[],times:[]},c,e;this.translateText(d.text.join(" <a></a>"),j,f,g,function(i){c=i.split("<a></a>");for(e=0;e<d.text.length;e++){b.text[e]=c[e];b.times[e]={start:d.times[e].start,stop:d.times[e].stop,settings:d.times[e].settings}}h(b)})},translateText:function(j,f,d,c,i){var l,e=[],h,b=1000,k="",g=function(){if(e.length>0){h=e.shift();mejs.SrtParser.translateChunk(h,f,d,c,function(m){if(m!="undefined"){k+=m}g()})}else{i(k)}};while(j.length>0){if(j.length>b){l=j.lastIndexOf(".",b);e.push(j.substring(0,l));j=j.substring(l+1)}else{e.push(j);j=""}}g()},translateChunk:function(e,g,c,d,f){var b={q:e,langpair:g+"|"+c,v:"1.0"};if(d!==""&&d!==null){b.key=d}a.ajax({url:"https://ajax.googleapis.com/ajax/services/language/translate",data:b,type:"GET",dataType:"jsonp",success:function(h){f(h.responseData.translatedText)},error:function(h){f(null)}})}};if("x\n\ny".split(/\n/gi).length!=3){mejs.SrtParser.split2=function(f,d){var e=[],b="",c;for(c=0;c<f.length;c++){b+=f.substring(c,c+1);if(d.test(b)){e.push(b.replace(d,""));b=""}}e.push(b);return e}}})(jQuery);
